name: Build and deploy to GitHub Pages

on:
  push:
    branches: [main]

permissions:
  contents: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      # –ü–æ–ª—É—á–∞–µ–º –≤–µ—Å—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

      # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Node.js
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 20

      # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –±–∏–ª–¥–∏–º –ø—Ä–æ–µ–∫—Ç
      - name: Install and build üîß
        run: |
          npm install
          npm run build

      # –î–µ–ø–ª–æ–π –Ω–∞ gh-pages
      - name: Deploy üöÄ
        uses: JamesIves/github-pages-deploy-action@4.1.0
        with:
          branch: gh-pages
          folder: dist
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Check dist folder exists
        run: |
              ls -la
              ls -la dist

